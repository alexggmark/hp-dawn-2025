{% comment %} 
  Alex - this pulls
{% endcomment %}

{%- assign icon_strip_metaobject = metaobjects.product_lp_icon_strip[section.settings.meta_object_source] -%}
{%- assign icon_pairs = icon_strip_metaobject.icon_pair.value -%}

<script>
  console.log("ICON PAIR METAOBJECT:")
  console.log({{ icon_strip_metaobject | json }})
  console.log({{ icon_pairs | json }})
</script>

{% comment %} {% assign product_lp_entries = product.metafields.custom.product_lp_entries.value %} {% endcomment %}

{% comment %} 
 {%- unless icon_strip_metaobject == blank -%}
  <div class="section-{{ section.id }}">
    {%- for entry in product_lp_entries -%}
      {%- case entry.type -%}
        {%- when "product_lp_icon_strip" -%}
          <div class="{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %} _bg-brand-background-light">
            <div class="_relative page-width md:_py-14 _py-10">
              <div class="_flex _flex-col _items-center">
                {%- unless entry.title == blank -%}
                  <h2 class="_font-heading-primary _text-brand-dark _text-center md:_text-2.5xl _text-2xl md:_mb-10 _mb-6">
                    {{ entry.title }}
                  </h2>
                {%- endunless -%}
                <div class="_flex _flex-row _flex-wrap md:_justify-between _justify-start md:_gap-8">
                  {%- assign entry_icons = entry.icon_pair.value -%}
                  {%- unless entry_icons == blank -%}
                    {%- for icon in entry_icons -%}
                      <div class="_flex _justify-start _items-center _gap-2 _mb-2 md:_max-w-[170px] _w-1/2">
                        <span class="svg-wrapper md:_w-12 md:_h-12 _w-8 _h-8 _flex-shrink-0 _text-brand-primary-500">
                          {{ 'metaobjecticon-large-' | append: icon.icon | append: '.svg' | inline_asset_content }}
                        </span>
                        <span class="_font-heading-small md:_text-sm _text-xs _text-brand-dark">
                          {{ icon.title }}
                        </span>
                      </div>
                    {%- endfor -%}
                  {%- endunless -%}
                </div>
              </div>
            </div>
          </div> {% endcomment %}

<div class="section-{{ section.id }} _mb-{{ section.settings.margin_bottom | divided_by: 2 }} md:_mb-{{ section.settings.margin_bottom }} {% if section.settings.show_background %} _bg-brand-background-light{% endif %} {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
  <div class="_relative page-width md:_py-14 _py-10">
    <div class="_flex _flex-col _items-center">
      {% unless section.settings.main_heading == blank %}
        <h2 class="_font-heading-primary _text-brand-dark md:_text-2.5xl _text-2xl md:_mb-10 _mb-6">
          {{ section.settings.main_heading }}
        </h2>
      {% endunless %}
      <div class="_flex _flex-row _flex-wrap md:_justify-between _justify-start md:_gap-8">
        {%- unless icon_pairs == blank -%}
          {%- for icon in icon_pairs -%}
            <div class="_flex _justify-start _items-center _gap-2 _mb-2 md:_max-w-[170px] _w-1/2">
              <span class="svg-wrapper md:_w-12 md:_h-12 _w-8 _h-8 _flex-shrink-0 _text-brand-primary-500">
                {{ 'metaobjecticon-large-' | append: icon.icon | append: '.svg' | inline_asset_content }}
              </span>
              <span class="_font-heading-small md:_text-sm _text-xs _text-brand-dark">
                {{ icon.title }}
              </span>
            </div>
          {%- endfor -%}
        {%- endunless -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "WM IconStrip Metaobject",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "show_background",
      "default": false,
      "label": "Turn on background"
    },
    {
      "type": "metaobject",
      "id": "meta_object_source",
      "label": "Metaobject to pull icons from",
      "metaobject_type": "product_lp_icon_strip"
    },
    {
      "type": "inline_richtext",
      "id": "top_heading",
      "default": "t:sections.footer.blocks.link_list.settings.heading.default",
      "label": "Top Heading"
    },
    {
      "type": "inline_richtext",
      "id": "main_heading",
      "default": "t:sections.footer.blocks.link_list.settings.heading.default",
      "label": "Main Heading"
    },
    {
      "type": "richtext",
      "id": "description",
      "default": "<p>Description text</p>",
      "info": "This is richtext",
      "label": "Description text"
    },
    {
      "type": "header",
      "content": "Margin bottom controls"
    },
    {
      "type": "select",
      "id": "margin_bottom",
      "options": [
        {
          "value": "0",
          "label": "0rem"
        },
        {
          "value": "2",
          "label": "0.5rem"
        },
        {
          "value": "4",
          "label": "1rem"
        },
        {
          "value": "6",
          "label": "1.5rem"
        },
        {
          "value": "8",
          "label": "2rem"
        },
        {
          "value": "12",
          "label": "3rem"
        },
        {
          "value": "16",
          "label": "4rem"
        }
      ],
      "default": "0",
      "label": "Margin bottom"
    }
  ],
  "presets": [
    {
      "name": "WM IconStrip Metaobject"
    }
  ]
}
{% endschema %}
