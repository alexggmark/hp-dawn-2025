<style>
  /* Hide all B variants by default */
  [data-abtest] [data-abtest-var="b"], [data-abtest-var="b"] {
    display: none;
  }

  /* "active-search" */
  .scrolled-past-header header.ab-test-active-search [data-abtest-var="a"] {
    display: block;
    opacity: 1;
    transition: opacity 0.3s ease;
  }
  .scrolled-past-header header.ab-test-active-search [data-abtest-var="b"] {
    display: none;
  }
  {%- unless request.page_type == 'product' -%}
    header.ab-test-active-search {
      margin-bottom: 2rem;
    }
    header.ab-test-active-search [data-abtest-var="a"] {
      display: none;
      opacity: 0;
    }
  {%- endunless -%}
  header.ab-test-active-search [data-abtest-var="b"] {
    display: block;
  }
  @media screen and (min-width: 990px) {
    header.ab-test-active-search {
      margin-bottom: 0;
    }
    header.ab-test-active-search [data-abtest-var="a"] {
      display: block;
      opacity: 1;
    }
  }
</style>

{% comment %} 
FIXME: Alex - no idea where else to put this - we might be wiping HP but useful to keep record
THIS is Customer Event code for HP Shopify, seems to be working ait


analytics.subscribe("checkout_completed", (event) => {
  !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
  posthog.init('phc_DBbisrhVEUNQnnwaIGDrMnP9qcPTi8f4uZhOhHO1107', { api_host: 'https://eu.i.posthog.com', defaults: '2025-05-24' })

  const checkout = event.data.checkout;

  posthog.identify(checkout.email, {
      email: checkout.email,
      first_name: checkout.billingAddress.firstName,
      last_name:  checkout.billingAddress.lastName,
    }
  )
  posthog.capture('Checkout Completed', {
    value: checkout.totalPrice.amount,
    currency: checkout.totalPrice.currencyCode,
    created_at: event.timestamp,
    order_number: checkout.order.id,
    userId: event.clientId,
    order_id: checkout.order.id,
    products: checkout.lineItems.map((item) => {
      return {
        product_id: item.id,
        title: item.variant.product.title,
        quantity: item.quantity,
        price: item.variant.price.amount,
        currency: item.variant.price.currencyCode,
        sku: item.variant.sku,
        size: item.variant.product.size
      };
    }),
  })
});

{% endcomment %}